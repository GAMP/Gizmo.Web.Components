@namespace Gizmo.Web.Components
@inherits GizInputBase<DateTime?>

<CascadingValue Value="@this" IsFixed="true">

    @if (Variant != PickerVariants.Static)
    {
        <div class="@Class @ClassName">

            <GizInput Label="@Label"
                      IsDisabled="@IsDisabled"
                      IsFullWidth="@IsFullWidth"
                      HasOutline="@HasOutline"
                      HasShadow="@HasShadow"
                      IsTransparent="@IsTransparent"
                      Size="@Size"
                      IsValid="@_isValid"
                      ValidationMessage="@_validationMessage"
                      RightSVGIcon="Icons.Calendar"
                      @onclick="OnClickInputHandler">

                <input id="@Id"
                       type="text"
                       value="@_text"
                       readonly="@IsReadOnly"
                       disabled="@IsDisabled"
                       @oninput="OnInputHandler"
                       @onclick="OnClickInputHandler" />

            </GizInput>

            <Popup IsModal="true" IsOpen="@IsOpen" Class="@PopupClassName" OpenDirection="@(Variant == PickerVariants.Inline ? PopupOpenDirections.Bottom : PopupOpenDirections.None)">
                <DatePickerBase Value="@Value" ValueChanged="@DatePickerValueChanged" IsFullWidth="@IsFullWidth" />
            </Popup>
        </div>

        <Overlay Visible="@IsOpen"
                 @onclick="OnClickOverlayHandler">
        </Overlay>
    }
    else
    {
        <DatePickerBase @bind-Value="Value" IsFullWidth="@IsFullWidth" />
    }

</CascadingValue>