@namespace Gizmo.Web.Components
@inherits CustomDOMComponentBase

@typeparam TItemType

<CascadingValue Value="@this" IsFixed="true">

    <div class="@Class @ClassName"
         style="@StyleMapper.AsString()">

        <GizInput Label="@Label"
                  IsDisabled="@IsDisabled"
                  IsFullWidth="@IsFullWidth"
                  HasOutline="@HasOutline"
                  HasShadow="@HasShadow"
                  Size="@Size"
                  RightIcon="fas fa-caret-down"
                  @onclick="OnClickMenuHandler">

            @if (_selectedItem != null)
            {
                @if (!string.IsNullOrEmpty(_selectedItem.Text))
                {
                    @_selectedItem.Text
                }
                else
                {
                    @_selectedItem.ChildContent
                }
            }
            else
            {
                @Placeholder
            }

        </GizInput>

        <Popup IsOpen="@IsOpen" Class="@PopupClassName">
            <List>
                @ChildContent
            </List>
        </Popup>
    </div>

    <Overlay Visible="@IsOpen"
             @onclick="OnClickOverlayHandler">
    </Overlay>

</CascadingValue>